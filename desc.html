<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Competency Description</title>
  <link href="https://fonts.googleapis.com/css2?family=Orienta&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Make sure this is the updated filterState.js that exposes window.LicensureFiltersRebind -->
  <script src="./filterState.js" defer></script>
  <style>
    body { font-family: 'Orienta', sans-serif; }
  </style>
</head>
<body class="bg-neutral-900 text-white min-h-screen flex flex-col items-center justify-start px-6 pt-6 pb-10 text-center">
  <div id="descContainer" class="w-full max-w-md flex flex-col items-center gap-4"></div>

  <script>
    // --- Data (unchanged) ---
  const data = [
      { img:'01.png', label:'Assess regulatory design requirements', desc:[
        'Identify local, state, and federal authorities having jurisdiction over a project.',
        'Understand the regulatory and jurisdictional approval process applicable to a project in order to obtain the necessary approvals.',
        'Determine the specific regulations, codes, and rules (e.g., zoning rules, building and environmental codes, historic preservation requirements, design covenants, etc.) that apply to a project.'
      ]},
      { img:'02.png', label:'Evaluate existing project conditions', desc:[
        'Assess existing site and building conditions',
        'Evaluate project feasibility based on budget, schedule, constraints, and risks.',
        'Assess how a proposed project aligns with planning and zoning policies in place and impacts the broader context (e.g. neighborhood, community, environmental, etc.).'
      ]},
      { img:'03.png', label:'Develop a program that establishes project criteria', desc:[
        'Translate client vision and goals into requirements (e.g. spatial, planning, material, technical, etc.) that outline the specific objectives and design criteria for a project, and that meet the project’s feasibility requirements.',
        'Review precedents relevant to the history, function, organization, and technical requirements of related projects and integrate findings into a building program.',
        'Evaluate and integrate collected feedback and input from users, the community, and any other stakeholders.'
      ]},
      { img:'04.png', label:'Create design solutions that support public and environmental well-being', desc:[
        'Implement design strategies that minimize environmental impact, safeguard environmental sustainability, ensure longevity and durability of projects, and adapt to evolving environmental and societal conditions.',
        'Implement design strategies that support the health, safety, and welfare of building occupants and the neighboring community.',
        'Advise clients and consultants regarding the sustainability and resiliency of design options in accordance with relevant codes, regulations, ratings, industry standards, and technical information.'
      ]},
      { img:'05.png', label:'Integrate socio-demographic considerations and universal design principles.', desc:[
        'Implement design strategies that address diverse cultural, social, and functional considerations, ensuring built environments are inclusive, accessible, and adaptive.',
        'Understand how diversity, equity, inclusivity, and justice principles impact architectural projects and practice.',
        'Utilize meaningful engagement processes that incorporate diverse perspectives into design solutions.'
      ]},
      { img:'06.png', label:'Create design solutions that address project requirements', desc:[
        'Apply design principles, applicable codes and regulations, and knowledge of materials, systems, and constructability to achieve programmatic requirements and goals for the site and building.',
        'Evaluate design for conformance with a project’s program, including the client’s objectives and regulatory requirements.',
        'Analyze cost estimates for conformance with proposed design solution and project budget in order to advise clients about alternatives for managing initial and long-term project costs.'
      ]},
      { img:'07.png', label:'Create deliverables that convey a design solution', desc:[
        'Communicate the proposed design to clients and other stakeholders using appropriate and responsive methods (e.g., written, verbal, graphic, modeling techniques, etc.).',
        'Develop comprehensive and coordinated Instruments of Service (e.g., plans, sections, elevations and/or details, models, etc.) that convey design intent and project requirements, can be used to obtain approvals and permits, and guide the construction of a project.',
        'Develop specifications that describe the materials, qualitative requirements, and execution.'
      ]},
      { img:'08.png', label:'Coordinate the integration of building systems into a project design', desc:[
        'Understand and integrate appropriate building and engineering systems utilizing project consultants and specialists (e.g., acoustic, structural, civil, mechanical, electrical, plumbing, etc.).',
        'Coordinate selected systems into the building design and identify and resolve conflicts.'
      ]},
      { img:'09.png', label:'Prepare and administer documentation of the construction phase', desc:[
        'Advise clients on the impact (e.g., process, cost, time, quality control, etc.) of a selected procurement method on the delivery of the project.',
        'Assist in bidding and negotiation for selected procurement method.',
        'Apply appropriate systems for record-keeping, document control, and revision status.',
        'Provide appropriate responses for questions from the client, authority-having jurisdiction, contractors, and suppliers (e.g., requests for information, substitution requests, change order requests, etc.).',
        'Review and act on a contractor’s application for payment.',
        'Perform closeout activities and deliver final documents to client and other parties as required.'
      ]},
      { img:'10.png', label:'Evaluate the progress of construction for conformance with contract documents and design intent', desc:[
        'Complete site visits and participate in meetings at appropriate intervals to observe construction progress and assist in interpreting the construction documents.',
        'Evaluate the work performed in relation to the construction schedule; if they are not in alignment, coordinate with the client and contractor in the development of a solution.',
        'Review, evaluate, and take appropriate action on shop drawings, submittals, testing and inspection reports, and samples.',
        'Advise and assist the client with project closeout procedures (e.g., substantial and final completion, review and preparation of close-out materials, etc.).',
        'Evaluate the performance of a project after completion compared to the design intent.'
      ]},
      { img:'11.png', label:'Execute contracts for professional services', desc:[
        'Explain basic types of contracts between various project parties (e.g., Owner-Architect, ArchitectConsultant, Owner-Contractor, etc.) and how to establish scope, schedule, and fees for services',
        'Understand the appropriateness of different agreements in relation to scale and type of project, including alternatives for partial services.',
        'Understand basic risk implications of common contract terms and conditions for the various contract parties.'
      ]},
      { img:'12.png', label:'Implement a work plan according to a project’s scope, schedule, and budget', desc:[
        'Collaborate with the client and consultants to align expectations for design scope, schedule, and budget.',
        'Monitor work plan throughout a project and report on progress.',
        'Organize tasks and resources to deliver a project according to contractual requirements.',
        'Facilitate the appropriate approval processes throughout design and documentation efforts.',
      ]},
      { img:'13.png', label:'Organize and coordinate an interdisciplinary project team', desc:[
        'Identify qualified consultants and team members for a project based on project requirements.',
        'Facilitate communication and collaboration of consultants, clients, and relevant stakeholders throughout a project.',
        'Implement processes to assess the quality of work throughout a project.'
      ]},
      { img:'14.png', label:'Implement processes to assess the quality of work throughout a project', desc:[
        'Comply with the laws and rules of architectural practice in the jurisdiction(s) in which they practice.',
        'Solicit services in compliance with professional and legal practice requirements.',
        'Understand the regulatory requirements for continuing professional development.'
      ]},
      { img:'15.png', label:'Understand ethical and professional standards that govern architectural practice', desc:[
        'Understand the role of the architect in society and the duties and responsibilities to clients, building occupants, co-professionals, and the public',
        'Provide services that they, in collaboration with consultants, can effectively deliver.',
        'Identify and manage risks arising from conflicts of interest.'
      ]},
      { img:'16.png', label:'Understand foundational business principles to operate a practice.', desc:[
        'Monitor the financial health of the business to ensure a proper level of service can be provided throughout a project.',
        'Assess and mitigate business risks (e.g., professional liability insurance).',
        'Allocate firm resources and staff to ensure adequate delivery of services to clients.'
      ]},
    ];

    // --- Read index from query ---
    const params = new URLSearchParams(window.location.search);
    const index = Number.parseInt(params.get('index'), 10);
    const valid = Number.isInteger(index) && index >= 0 && index < data.length;
    const competency = valid ? data[index] : null;

    // --- Decide next page based on saved role ---
    function getState() {
      try {
        if (window.LicensureFilters && window.LicensureFilters.get) {
          return window.LicensureFilters.get();
        }
        return JSON.parse(localStorage.getItem('licensureFilters') || '{}');
      } catch { return {}; }
    }
    const state = getState();
    const role = String(state.role || state.Role || state.ROLE || localStorage.getItem('selectedRole') || '');
    const nextByRole = {
      'Student': '/year.html',
      'Instructor': '/year.html',
      'Admin': '/tasks.html',
      'Administrator': '/tasks.html'
    };
    const nextPage = nextByRole[role] || '/year.html';

    // --- Render ---
    const container = document.getElementById('descContainer');

    if (!competency) {
      container.innerHTML = `
        <p class="text-sm text-red-300">Invalid or missing competency. <a href="/competencies.html" class="underline">Go back</a>.</p>
      `;
    } else {
      container.innerHTML = `
        <h2 class="text-xl font-bold leading-tight">WHAT COMPETENCY<br />ARE YOU INTERESTED IN?</h2>

        <img src="/comp_icons/${competency.img}" alt="${competency.label}" class="w-24 h-24 mx-auto" />
        <h4 class="text-lg font-bold tracking-tight">${competency.label}</h4>

        <div class="text-sm text-left text-gray-200 leading-relaxed w-full max-w-md">
          <strong class="block text-white mb-2">${competency.label}</strong>
          <ul class="list-disc list-inside space-y-1">
            ${competency.desc.map(line => `<li>${line}</li>`).join('')}
          </ul>
        </div>

        <div class="flex gap-4 mt-6">
          <a href="/competencies.html" class="bg-gray-200 text-slate-900 px-4 py-2 rounded font-bold text-sm">BACK</a>

          <!-- SELECT saves Competency and navigates using data-next -->
          <button type="button"
                  data-filter
                  data-key="Competency"
                  data-value="${index + 1}"
                  data-next="${nextPage}"
                  class="bg-gray-200 text-slate-900 px-4 py-2 rounded font-bold text-sm">
            SELECT
          </button>
        </div>
      `;
    }

    // Rebind the newly injected [data-filter] control
    if (window.LicensureFiltersRebind) {
      window.LicensureFiltersRebind(container);
    }
  </script>
</body>
</html>
