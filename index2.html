<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>U.S. Map with States and Institutions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link 
    rel="stylesheet" 
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha512-sA+z0w3oayBNZlTy/6Dib6uvMJfULqKydNdcQh9swTtPP+HZydP1EOKSIs1vld6PWiN+th5X1vE4rb7sP6Z4hQ==" 
    crossorigin=""
  />
  <style>
    html, body { height: 100%; margin: 0; }
    #map { width: 100%; height: 100%; }
    .inset {
      border: 2px solid #666;
      background: #fff;
    }
    .leaflet-bottom.leaflet-left {
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
  const map = L.map('map', {
    center: [39.5, -98.35],
    zoom: 4,
    minZoom: 3,
    maxZoom: 10
  });

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Load US state boundaries
  fetch('https://raw.githubusercontent.com/PublicaMundi/MappingAPI/master/data/geojson/us-states.json')
    .then(response => response.json())
    .then(data => {
      L.geoJSON(data, {
        style: {
          color: '#444',
          weight: 1.5,
          fillOpacity: 0.1
        }
      }).addTo(map);
    });

  // Load institutions with '+' shaped markers
  fetch('https://yourdomain.com/data/institutions.geojson') // Replace with your real URL
    .then(response => response.json())
    .then(data => {
      L.geoJSON(data, {
        pointToLayer: (feature, latlng) => {
          return L.marker(latlng, {
            icon: L.divIcon({
              className: 'plus-icon',
              iconSize: [12, 12],
              html: `<div style="
                color: #0078CF;
                font-size: 16px;
                font-weight: bold;
                line-height: 12px;
                transform: translate(-50%, -50%);
                pointer-events: none;">+</div>`
            })
          });
        },
        onEachFeature: (feature, layer) => {
          if (feature.properties && feature.properties.name) {
            layer.bindPopup(`<strong>${feature.properties.name}</strong>`);
          }
        }
      }).addTo(map);
    });

  // Alaska inset
  const alaskaMap = L.map(document.createElement('div'), {
    zoomControl: false,
    attributionControl: false
  }).setView([64.2, -152.5], 3);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(alaskaMap);
  const alaskaControl = L.control({ position: 'bottomleft' });
  alaskaControl.onAdd = function () {
    const container = L.DomUtil.create('div', 'inset');
    container.style.width = '200px';
    container.style.height = '150px';
    alaskaMap._container = container;
    setTimeout(() => alaskaMap.invalidateSize(), 0);
    return container;
  };
  alaskaControl.addTo(map);

  // Hawaii inset
  const hawaiiMap = L.map(document.createElement('div'), {
    zoomControl: false,
    attributionControl: false
  }).setView([20.7, -157.5], 7);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(hawaiiMap);
  const hawaiiControl = L.control({ position: 'bottomleft' });
  hawaiiControl.onAdd = function () {
    const container = L.DomUtil.create('div', 'inset');
    container.style.width = '200px';
    container.style.height = '150px';
    container.style.marginTop = '10px';
    hawaiiMap._container = container;
    setTimeout(() => hawaiiMap.invalidateSize(), 0);
    return container;
  };
  hawaiiControl.addTo(map);
</script>
</body>
</html>
